import{s as ct,e as b,d as v,f as q,i as p,O as Lt,v as I,k as O,l as w,P as V,Q as Ht,n as lt,A as ft,R as Pt,C as wt,S as At,t as G,b as H,h as X,j as z,T as W,U as Q,m as ut,V as xt,W as Z,x as vt,X as zt,Y as St}from"../chunks/scheduler.Bnapz6z0.js";import{S as at,i as ht,b as dt,d as mt,m as pt,t as et,g as Rt,c as jt,a as nt,e as gt,f as qt}from"../chunks/index.DElnCtB0.js";function rt(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function Vt(s,e){const l={},n={},c={$$scope:1};let o=s.length;for(;o--;){const u=s[o],t=e[o];if(t){for(const r in u)r in t||(n[r]=1);for(const r in t)c[r]||(l[r]=t[r],c[r]=1);s[o]=t}else for(const r in u)c[r]=1}for(const u in n)u in l||(l[u]=void 0);return l}function Ft(s){return typeof s=="object"&&s!==null?s:{}}function Gt(s){let e,l,n,c,o,u;return{c(){e=b("button"),l=b("img"),this.h()},l(t){e=v(t,"BUTTON",{id:!0,class:!0});var r=q(e);l=v(r,"IMG",{src:!0,alt:!0,class:!0}),r.forEach(p),this.h()},h(){Lt(l.src,n=s[2])||I(l,"src",n),I(l,"alt",""),I(l,"class","svelte-4wjcsy"),I(e,"id",c=`c-${s[0]}-${s[1]}`),I(e,"class","svelte-4wjcsy")},m(t,r){O(t,e,r),w(e,l),o||(u=[V(e,"click",s[3]),V(e,"contextmenu",Ht(s[8]))],o=!0)},p(t,[r]){r&4&&!Lt(l.src,n=t[2])&&I(l,"src",n),r&3&&c!==(c=`c-${t[0]}-${t[1]}`)&&I(e,"id",c)},i:lt,o:lt,d(t){t&&p(e),o=!1,ft(u)}}}function Xt(s,e,l){let n,{value:c}=e,{x:o}=e,{y:u}=e,{status:t}=e,{is_init:r}=e,{freeze:f}=e;const y=Pt(),a={init:"init",clear:c,mark:"flag",fail:"mine-red",wrong:"flag-red"};function M(C){f||(r?t=="init"?C.button==0?c==-1?(l(4,t="fail"),y("fail",{x:o,y:u})):(l(4,t="clear"),c==0&&y("confirm",{x:o,y:u})):C.button==2&&(y("flag",{x:o,y:u}),l(4,t="mark")):t=="clear"&&c>0?y("confirm",{x:o,y:u}):t=="mark"&&C.button==2&&(y("unflag",{x:o,y:u}),l(4,t="init")):(l(5,r=!0),y("init",{x:o,y:u})))}const k=()=>M({button:2});return s.$$set=C=>{"value"in C&&l(6,c=C.value),"x"in C&&l(0,o=C.x),"y"in C&&l(1,u=C.y),"status"in C&&l(4,t=C.status),"is_init"in C&&l(5,r=C.is_init),"freeze"in C&&l(7,f=C.freeze)},s.$$.update=()=>{s.$$.dirty&80&&l(2,n=(a[t]??c??"init")+".svg")},[o,u,n,M,t,r,c,f,k]}class Jt extends at{constructor(e){super(),ht(this,e,Xt,Gt,ct,{value:6,x:0,y:1,status:4,is_init:5,freeze:7})}}function Bt(s,e,l){const n=s.slice();return n[17]=e[l],n}function It(s){let e,l,n=s[17]+"",c,o,u,t,r;return u=At(s[8][0]),{c(){e=b("label"),l=b("input"),c=G(n),o=b("br"),this.h()},l(f){e=v(f,"LABEL",{});var y=q(e);l=v(y,"INPUT",{type:!0,name:!0}),c=X(y,n),y.forEach(p),o=v(f,"BR",{}),this.h()},h(){I(l,"type","radio"),I(l,"name","level"),l.__value=s[17],Q(l,l.__value),u.p(l)},m(f,y){O(f,e,y),w(e,l),l.checked=l.__value===s[3],w(e,c),O(f,o,y),t||(r=[V(l,"change",s[7]),V(l,"change",s[5])],t=!0)},p(f,y){y&8&&(l.checked=l.__value===f[3])},d(f){f&&(p(e),p(o)),u.r(),t=!1,ft(r)}}}function Kt(s){let e,l="width: ",n,c,o,u,t="height: ",r,f,y,a,M="count: ",k,C,P;return{c(){e=b("label"),e.textContent=l,n=b("input"),c=b("br"),o=H(),u=b("label"),u.textContent=t,r=b("input"),f=b("br"),y=H(),a=b("label"),a.textContent=M,k=b("input"),this.h()},l(i){e=v(i,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1fdanlc"&&(e.textContent=l),n=v(i,"INPUT",{type:!0,name:!0,class:!0}),c=v(i,"BR",{}),o=z(i),u=v(i,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),W(u)!=="svelte-19r74aw"&&(u.textContent=t),r=v(i,"INPUT",{type:!0,name:!0,class:!0}),f=v(i,"BR",{}),y=z(i),a=v(i,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),W(a)!=="svelte-t2iefa"&&(a.textContent=M),k=v(i,"INPUT",{type:!0,name:!0,class:!0}),this.h()},h(){I(e,"for","width"),I(e,"class","svelte-k3yb6l"),I(n,"type","number"),I(n,"name","width"),I(n,"class","svelte-k3yb6l"),I(u,"for","height"),I(u,"class","svelte-k3yb6l"),I(r,"type","number"),I(r,"name","height"),I(r,"class","svelte-k3yb6l"),I(a,"for","count"),I(a,"class","svelte-k3yb6l"),I(k,"type","number"),I(k,"name","count"),I(k,"class","svelte-k3yb6l")},m(i,g){O(i,e,g),O(i,n,g),Q(n,s[0]),O(i,c,g),O(i,o,g),O(i,u,g),O(i,r,g),Q(r,s[1]),O(i,f,g),O(i,y,g),O(i,a,g),O(i,k,g),Q(k,s[2]),C||(P=[V(n,"input",s[13]),V(r,"input",s[14]),V(k,"input",s[15])],C=!0)},p(i,g){g&1&&Z(n.value)!==i[0]&&Q(n,i[0]),g&2&&Z(r.value)!==i[1]&&Q(r,i[1]),g&4&&Z(k.value)!==i[2]&&Q(k,i[2])},d(i){i&&(p(e),p(n),p(c),p(o),p(u),p(r),p(f),p(y),p(a),p(k)),C=!1,ft(P)}}}function Qt(s){let e,l="width: ",n,c,o,u,t="height: ",r,f,y,a,M="count: ",k,C,P;return{c(){e=b("label"),e.textContent=l,n=b("input"),c=b("br"),o=H(),u=b("label"),u.textContent=t,r=b("input"),f=b("br"),y=H(),a=b("label"),a.textContent=M,k=b("input"),this.h()},l(i){e=v(i,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1fdanlc"&&(e.textContent=l),n=v(i,"INPUT",{type:!0,name:!0,class:!0}),c=v(i,"BR",{}),o=z(i),u=v(i,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),W(u)!=="svelte-19r74aw"&&(u.textContent=t),r=v(i,"INPUT",{type:!0,name:!0,class:!0}),f=v(i,"BR",{}),y=z(i),a=v(i,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),W(a)!=="svelte-t2iefa"&&(a.textContent=M),k=v(i,"INPUT",{type:!0,name:!0,class:!0}),this.h()},h(){I(e,"for","width"),I(e,"class","svelte-k3yb6l"),I(n,"type","number"),I(n,"name","width"),n.disabled=!0,I(n,"class","svelte-k3yb6l"),I(u,"for","height"),I(u,"class","svelte-k3yb6l"),I(r,"type","number"),I(r,"name","height"),r.disabled=!0,I(r,"class","svelte-k3yb6l"),I(a,"for","count"),I(a,"class","svelte-k3yb6l"),I(k,"type","number"),I(k,"name","count"),k.disabled=!0,I(k,"class","svelte-k3yb6l")},m(i,g){O(i,e,g),O(i,n,g),Q(n,s[0]),O(i,c,g),O(i,o,g),O(i,u,g),O(i,r,g),Q(r,s[1]),O(i,f,g),O(i,y,g),O(i,a,g),O(i,k,g),Q(k,s[2]),C||(P=[V(n,"input",s[10]),V(r,"input",s[11]),V(k,"input",s[12])],C=!0)},p(i,g){g&1&&Z(n.value)!==i[0]&&Q(n,i[0]),g&2&&Z(r.value)!==i[1]&&Q(r,i[1]),g&4&&Z(k.value)!==i[2]&&Q(k,i[2])},d(i){i&&(p(e),p(n),p(c),p(o),p(u),p(r),p(f),p(y),p(a),p(k)),C=!1,ft(P)}}}function Wt(s){let e,l,n,c,o,u,t,r,f,y,a,M,k,C,P,i,g,U,T,N,E,A,R,h,L,_,d,x,D,m="<code>OK</code>",B,J,$,st=rt(Object.keys(s[4])),F=[];for(let j=0;j<st.length;j+=1)F[j]=It(Bt(s,st,j));function Ct(j,K){return j[3]in j[4]?Qt:Kt}let bt=Ct(s),tt=bt(s);return B=At(s[8][0]),{c(){e=b("div"),l=b("label"),n=b("code"),c=G("Level "),o=b("button"),u=b("code"),t=G(s[3]),r=G(": "),f=G(s[0]),y=G("x"),a=G(s[1]),M=G(","),k=G(s[2]),C=H(),P=b("dialog"),i=b("div");for(let j=0;j<F.length;j+=1)F[j].c();g=H(),U=b("label"),T=b("input"),N=G("custom"),E=b("br"),A=G(" "),R=H(),h=b("div"),tt.c(),L=H(),_=b("br"),d=G(" "),x=H(),D=b("button"),D.innerHTML=m,this.h()},l(j){e=v(j,"DIV",{});var K=q(e);l=v(K,"LABEL",{});var S=q(l);n=v(S,"CODE",{});var Y=q(n);c=X(Y,"Level "),o=v(Y,"BUTTON",{});var Tt=q(o);u=v(Tt,"CODE",{});var Et=q(u);t=X(Et,s[3]),Et.forEach(p),Tt.forEach(p),r=X(Y,": "),f=X(Y,s[0]),y=X(Y,"x"),a=X(Y,s[1]),M=X(Y,","),k=X(Y,s[2]),Y.forEach(p),S.forEach(p),C=z(K),P=v(K,"DIALOG",{id:!0});var it=q(P);i=v(it,"DIV",{});var ot=q(i);for(let kt=0;kt<F.length;kt+=1)F[kt].l(ot);g=z(ot),U=v(ot,"LABEL",{});var yt=q(U);T=v(yt,"INPUT",{type:!0,name:!0}),N=X(yt,"custom"),yt.forEach(p),E=v(ot,"BR",{}),A=X(ot," "),ot.forEach(p),R=z(it),h=v(it,"DIV",{});var _t=q(h);tt.l(_t),L=z(_t),_=v(_t,"BR",{}),d=X(_t," "),_t.forEach(p),x=z(it),D=v(it,"BUTTON",{"data-svelte-h":!0}),W(D)!=="svelte-hzki6z"&&(D.innerHTML=m),it.forEach(p),K.forEach(p),this.h()},h(){I(T,"type","radio"),I(T,"name","level"),T.__value="custom",Q(T,T.__value),I(P,"id","opt_dlg"),B.p(T)},m(j,K){O(j,e,K),w(e,l),w(l,n),w(n,c),w(n,o),w(o,u),w(u,t),w(n,r),w(n,f),w(n,y),w(n,a),w(n,M),w(n,k),w(e,C),w(e,P),w(P,i);for(let S=0;S<F.length;S+=1)F[S]&&F[S].m(i,null);w(i,g),w(i,U),w(U,T),T.checked=T.__value===s[3],w(U,N),w(i,E),w(i,A),w(P,R),w(P,h),tt.m(h,null),w(h,L),w(h,_),w(h,d),w(P,x),w(P,D),J||($=[V(o,"click",Yt),V(T,"change",s[9]),V(T,"change",s[5]),V(D,"click",s[6])],J=!0)},p(j,[K]){if(K&8&&ut(t,j[3]),K&1&&ut(f,j[0]),K&2&&ut(a,j[1]),K&4&&ut(k,j[2]),K&56){st=rt(Object.keys(j[4]));let S;for(S=0;S<st.length;S+=1){const Y=Bt(j,st,S);F[S]?F[S].p(Y,K):(F[S]=It(Y),F[S].c(),F[S].m(i,g))}for(;S<F.length;S+=1)F[S].d(1);F.length=st.length}K&8&&(T.checked=T.__value===j[3]),bt===(bt=Ct(j))&&tt?tt.p(j,K):(tt.d(1),tt=bt(j),tt&&(tt.c(),tt.m(h,L)))},i:lt,o:lt,d(j){j&&p(e),xt(F,j),tt.d(),B.r(),J=!1,ft($)}}}function Yt(){document.querySelector("dialog#opt_dlg").showModal()}function Zt(s,e,l){const n={easy:{width:8,height:8,count:10},medium:{width:16,height:16,count:40},expert:{width:30,height:16,count:99}};let c="expert",{width:o=30}=e,{height:u=16}=e,{count:t=99}=e;function r(){if(c in n){const N=n[c];l(0,o=N.width),l(1,u=N.height),l(2,t=N.count)}}const f=Pt();function y(){document.querySelector("dialog#opt_dlg").close(),f("change")}const a=[[]];function M(){c=this.__value,l(3,c)}function k(){c=this.__value,l(3,c)}function C(){o=Z(this.value),l(0,o)}function P(){u=Z(this.value),l(1,u)}function i(){t=Z(this.value),l(2,t)}function g(){o=Z(this.value),l(0,o)}function U(){u=Z(this.value),l(1,u)}function T(){t=Z(this.value),l(2,t)}return s.$$set=N=>{"width"in N&&l(0,o=N.width),"height"in N&&l(1,u=N.height),"count"in N&&l(2,t=N.count)},[o,u,t,c,n,r,y,M,a,k,C,P,i,g,U,T]}class $t extends at{constructor(e){super(),ht(this,e,Zt,Wt,ct,{width:0,height:1,count:2})}get width(){return this.$$.ctx[0]}set width(e){this.$$set({width:e}),wt()}get height(){return this.$$.ctx[1]}set height(e){this.$$set({height:e}),wt()}get count(){return this.$$.ctx[2]}set count(e){this.$$set({count:e}),wt()}}function te(s){let e,l,n=(s[0]/1e3).toFixed(3)+"",c,o;return{c(){e=b("code"),l=G("Elapsed: "),c=G(n),o=G(" seconds")},l(u){e=v(u,"CODE",{});var t=q(e);l=X(t,"Elapsed: "),c=X(t,n),o=X(t," seconds"),t.forEach(p)},m(u,t){O(u,e,t),w(e,l),w(e,c),w(e,o)},p(u,[t]){t&1&&n!==(n=(u[0]/1e3).toFixed(3)+"")&&ut(c,n)},i:lt,o:lt,d(u){u&&p(e)}}}function ee(s,e,l){let n=0,c=0,o=0,u,t=0;function r(){n=0,o=0,c=0,l(0,t=0),u&&(clearInterval(u),u=null)}function f(){r(),n=Date.now(),u=setInterval(()=>l(0,t=a()),100)}function y(){o=Date.now(),l(0,t=a()),u&&(clearInterval(u),u=null)}function a(){return n==0?0:o!=0?o+c-n:Date.now()+c-n}return[t,r,f,y]}class ne extends at{constructor(e){super(),ht(this,e,ee,te,ct,{reset:1,start:2,stop:3})}get reset(){return this.$$.ctx[1]}get start(){return this.$$.ctx[2]}get stop(){return this.$$.ctx[3]}}function Mt(s,e,l){const n=s.slice();return n[25]=e[l],n}function Ot(s,e,l){const n=s.slice();return n[28]=e[l],n[29]=e,n[30]=l,n}function Nt(s){let e,l,n;const c=[s[28]];function o(t){s[16](t,s[28])}let u={};for(let t=0;t<c.length;t+=1)u=zt(u,c[t]);return s[28].status!==void 0&&(u.status=s[28].status),e=new Jt({props:u}),vt.push(()=>qt(e,"status",o)),e.$on("flag",s[5]),e.$on("unflag",s[6]),e.$on("confirm",s[7]),e.$on("init",s[8]),e.$on("fail",s[9]),{c(){dt(e.$$.fragment)},l(t){mt(e.$$.fragment,t)},m(t,r){pt(e,t,r),n=!0},p(t,r){s=t;const f=r&8?Vt(c,[Ft(s[28])]):{};!l&&r&8&&(l=!0,f.status=s[28].status,St(()=>l=!1)),e.$set(f)},i(t){n||(et(e.$$.fragment,t),n=!0)},o(t){nt(e.$$.fragment,t),n=!1},d(t){gt(e,t)}}}function Ut(s){let e,l,n,c=rt(s[25]),o=[];for(let t=0;t<c.length;t+=1)o[t]=Nt(Ot(s,c,t));const u=t=>nt(o[t],1,1,()=>{o[t]=null});return{c(){e=b("div");for(let t=0;t<o.length;t+=1)o[t].c();l=H(),this.h()},l(t){e=v(t,"DIV",{class:!0});var r=q(e);for(let f=0;f<o.length;f+=1)o[f].l(r);l=z(r),r.forEach(p),this.h()},h(){I(e,"class","row svelte-73hlw")},m(t,r){O(t,e,r);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);w(e,l),n=!0},p(t,r){if(r&1e3){c=rt(t[25]);let f;for(f=0;f<c.length;f+=1){const y=Ot(t,c,f);o[f]?(o[f].p(y,r),et(o[f],1)):(o[f]=Nt(y),o[f].c(),et(o[f],1),o[f].m(e,l))}for(Rt(),f=c.length;f<o.length;f+=1)u(f);jt()}},i(t){if(!n){for(let r=0;r<c.length;r+=1)et(o[r]);n=!0}},o(t){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)nt(o[r]);n=!1},d(t){t&&p(e),xt(o,t)}}}function le(s){let e,l,n,c,o,u,t,r,f,y,a,M,k="restart",C,P,i,g,U,T={};e=new $t({props:T}),s[14](e),e.$on("change",s[0]);let N={};f=new ne({props:N}),s[15](f);let E=rt(s[3]),A=[];for(let h=0;h<E.length;h+=1)A[h]=Ut(Mt(s,E,h));const R=h=>nt(A[h],1,1,()=>{A[h]=null});return{c(){dt(e.$$.fragment),l=H(),n=b("p"),c=b("code"),o=G("Remain: "),u=G(s[4]),t=H(),r=b("p"),dt(f.$$.fragment),y=H(),a=b("p"),M=b("button"),M.textContent=k,C=H(),P=b("div");for(let h=0;h<A.length;h+=1)A[h].c()},l(h){mt(e.$$.fragment,h),l=z(h),n=v(h,"P",{});var L=q(n);c=v(L,"CODE",{});var _=q(c);o=X(_,"Remain: "),u=X(_,s[4]),_.forEach(p),L.forEach(p),t=z(h),r=v(h,"P",{});var d=q(r);mt(f.$$.fragment,d),d.forEach(p),y=z(h),a=v(h,"P",{});var x=q(a);M=v(x,"BUTTON",{"data-svelte-h":!0}),W(M)!=="svelte-5dldn0"&&(M.textContent=k),x.forEach(p),C=z(h),P=v(h,"DIV",{});var D=q(P);for(let m=0;m<A.length;m+=1)A[m].l(D);D.forEach(p)},m(h,L){pt(e,h,L),O(h,l,L),O(h,n,L),w(n,c),w(c,o),w(c,u),O(h,t,L),O(h,r,L),pt(f,r,null),O(h,y,L),O(h,a,L),w(a,M),O(h,C,L),O(h,P,L);for(let _=0;_<A.length;_+=1)A[_]&&A[_].m(P,null);i=!0,g||(U=V(M,"click",s[0]),g=!0)},p(h,[L]){const _={};e.$set(_),(!i||L&16)&&ut(u,h[4]);const d={};if(f.$set(d),L&1e3){E=rt(h[3]);let x;for(x=0;x<E.length;x+=1){const D=Mt(h,E,x);A[x]?(A[x].p(D,L),et(A[x],1)):(A[x]=Ut(D),A[x].c(),et(A[x],1),A[x].m(P,null))}for(Rt(),x=E.length;x<A.length;x+=1)R(x);jt()}},i(h){if(!i){et(e.$$.fragment,h),et(f.$$.fragment,h);for(let L=0;L<E.length;L+=1)et(A[L]);i=!0}},o(h){nt(e.$$.fragment,h),nt(f.$$.fragment,h),A=A.filter(Boolean);for(let L=0;L<A.length;L+=1)nt(A[L]);i=!1},d(h){h&&(p(l),p(n),p(t),p(r),p(y),p(a),p(C),p(P)),s[14](null),gt(e,h),s[15](null),gt(f),xt(A,h),g=!1,U()}}}function se(s){switch(s.status){case"init":return" ";case"mark":return"F";case"clear":return s.value;default:return"X"}}function ie(s,e,l){let n={width:30,height:16,count:99},c={};const o=[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]];function u(_,d){let x=0;for(let D of o){const m=_+D[0],B=d+D[1];0<=m&&m<n.width&&0<=B&&B<n.height&&t[B][m].value==-1&&++x}return x}let t,r,f;C();function y(_,d){l(4,--f)}function a(_,d){l(4,++f)}function M(_,d){let x=0;for(let D of o){const m=_+D[0],B=d+D[1];0<=m&&m<n.width&&0<=B&&B<n.height&&t[B][m].status=="mark"&&++x}return x}function k(_){const d=[[_.detail.x,_.detail.y]];for(;d.length>0;){const x=d.pop(),D=x[0],m=x[1];if(M(D,m)==t[m][D].value)for(let B of o){const J=D+B[0],$=m+B[1];0<=J&&J<n.width&&0<=$&&$<n.height&&t[$][J].status=="init"&&(t[$][J].value>=0?l(3,t[$][J].status="clear",t):(l(3,t[$][J].status="fail",t),i()),t[$][J].value==0&&d.push([J,$]))}}}function C(){r="working",l(3,t=[]);for(let _=0;_<n.height;++_){l(3,t[_]=[],t);for(let d=0;d<n.width;++d)l(3,t[_][d]={x:d,y:_,status:"init",value:null,is_init:!1,freeze:!1},t)}l(4,f=n.count),c.reset&&c.reset()}function P(_){const d=_.detail.x,x=_.detail.y;let D=0;for(;D<n.count;){const m=Math.floor(Math.random()*n.width),B=Math.floor(Math.random()*n.height);d-1<=m&&m<=d+1&&x-1<=B&&B<=x+1||t[B][m].value==null&&(l(3,t[B][m].value=-1,t),D++)}for(let m=0;m<n.height;++m)for(let B=0;B<n.width;++B)l(3,t[m][B].is_init=!0,t),t[m][B].value==null&&l(3,t[m][B].value=u(B,m),t);l(3,t[x][d].status="clear",t),k({detail:{x:d,y:x}}),c.start()}function i(){c.stop(),r="failure";for(let _=0;_<n.height;++_)for(let d=0;d<n.width;++d)l(3,t[_][d].freeze=!0,t),t[_][d].value!=-1&&t[_][d].status=="mark"&&l(3,t[_][d].status="wrong",t)}function g(){return r!="working"||f>0||U()||(c.stop(),r="success"),r}function U(){for(const _ of t)for(const d of _)if(d.status=="init")return!0;return!1}function T(){return{status:g(),count:n.count,remain:f,width:n.width,height:n.height,data:t.map(_=>_.map(se))}}function N(_,d){t[d][_].status=="init"&&(l(4,--f),l(3,t[d][_].status="mark",t))}function E(_,d){t[d][_].status=="init"&&(t[d][_].value>=0?l(3,t[d][_].status="clear",t):(l(3,t[d][_].status="fail",t),i())),document.querySelector(`button#c-${_}-${d}`).click()}function A(){navigator.clipboard.writeText(JSON.stringify(t))}function R(_){vt[_?"unshift":"push"](()=>{n=_,l(1,n)})}function h(_){vt[_?"unshift":"push"](()=>{c=_,l(2,c)})}function L(_,d){s.$$.not_equal(d.status,_)&&(d.status=_,l(3,t))}return[C,n,c,t,f,y,a,k,P,i,T,N,E,A,R,h,L]}class oe extends at{constructor(e){super(),ht(this,e,ie,le,ct,{restart:0,view:10,mark:11,dig:12,do_copy:13})}get restart(){return this.$$.ctx[0]}get view(){return this.$$.ctx[10]}get mark(){return this.$$.ctx[11]}get dig(){return this.$$.ctx[12]}get do_copy(){return this.$$.ctx[13]}}function ue(s){let e,l,n,c,o="<code>Go</code>",u,t,r="<code>Step</code>",f,y,a,M,k,C="<code>Go Guess</code>",P,i,g="<code>Step Guess</code>",U,T;return{c(){e=b("div"),l=b("p"),n=H(),c=b("button"),c.innerHTML=o,u=H(),t=b("button"),t.innerHTML=r,f=H(),y=b("br"),a=b("br"),M=H(),k=b("button"),k.innerHTML=C,P=H(),i=b("button"),i.innerHTML=g},l(N){e=v(N,"DIV",{});var E=q(e);l=v(E,"P",{}),q(l).forEach(p),n=z(E),c=v(E,"BUTTON",{"data-svelte-h":!0}),W(c)!=="svelte-191pd97"&&(c.innerHTML=o),u=z(E),t=v(E,"BUTTON",{"data-svelte-h":!0}),W(t)!=="svelte-1bunicv"&&(t.innerHTML=r),f=z(E),y=v(E,"BR",{}),a=v(E,"BR",{}),M=z(E),k=v(E,"BUTTON",{"data-svelte-h":!0}),W(k)!=="svelte-qgdn0r"&&(k.innerHTML=C),P=z(E),i=v(E,"BUTTON",{"data-svelte-h":!0}),W(i)!=="svelte-1c4pp3z"&&(i.innerHTML=g),E.forEach(p)},m(N,E){O(N,e,E),w(e,l),w(e,n),w(e,c),w(e,u),w(e,t),w(e,f),w(e,y),w(e,a),w(e,M),w(e,k),w(e,P),w(e,i),U||(T=[V(c,"click",s[3]),V(t,"click",s[4]),V(k,"click",s[5]),V(i,"click",s[6])],U=!0)},p:lt,i:lt,o:lt,d(N){N&&p(e),U=!1,ft(T)}}}function re(s){const e=[];for(let l=0;l<s.height;++l)for(let n=0;n<s.width;++n)s.data[l][n]===" "&&e.push({x:n,y:l});return{cells:e,min:s.remain,max:s.remain}}function Dt(s,e){return s.find(l=>l.x===e.x&&l.y===e.y)!=null}function ce(s,e){const l=Math.min(s.cells.length,e.cells.length);for(let n=0;n<l;++n){const c=s.cells[n],o=e.cells[n];let u=c.y-o.y;if(u!=0||(u=c.x-o.x,u!=0))return u}return s.cells.length-e.cells.length}function fe(s,e){return s.min==e.min&&s.max==e.max&&s.cells.length==e.cells.length&&ce(s,e)==0}function ae(s){const e=[];for(const c of s){const o=(c.min+c.max)/c.cells.length;for(const u of c.cells){let t;u.y in e?t=e[u.y]:(t=[],e[u.y]=t),u.x in t?o>t[u.x]&&(t[u.x]=o):t[u.x]=o}}let l=4,n;for(const[c,o]of e.entries())if(o!=null)for(const[u,t]of o.entries())t!=null&&t<l&&(l=t,n={x:u,y:c});return n}function he(s,e,l){let{field:n}=e;const c=[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]];function*o(i,g,U){for(let T of c){const N=g+T[0],E=U+T[1];0<=N&&N<i.width&&0<=E&&E<i.height&&(yield{x:N,y:E})}}function u(i,g,U,T){let N=0;for(const E of o(i,g,U))T(i.data[E.y][E.x])&&++N;return N}function t(i,g,U,T){const N=[];for(const E of o(i,g,U))T(i.data[E.y][E.x])&&N.push(E);return N}function r(i){const g=n.view();if(g.status!="working")return!1;const U=f(g,i);if(!U||U.length==0)return!1;for(const T of U)switch(T.op){case"dig":n.dig(T.x,T.y);break;case"mark":n.mark(T.x,T.y)}return!0}function f(i,g){return y(i,g)}function y(i,g){const U=[re(i)];if(U[0].cells.length==i.height*i.width)return[{op:"dig",x:Math.floor(i.width/2),y:Math.floor(i.height/2)}];for(let R=0;R<i.height;++R)for(let h=0;h<i.width;++h)if(typeof i.data[R][h]=="number"){const L=i.data[R][h],_=t(i,h,R,m=>m===" ");if(_.length==0)continue;const d=u(i,h,R,m=>m==="F"),x=L-d,D={cells:_,min:x,max:x};U.push(D)}const T={};for(const R of U)for(const h of R.cells){const L=`${h.x},${h.y}`;L in T?T[L].push(R):T[L]=[R]}for(const R of[...U]){const h=[];for(const L of R.cells){const _=`${L.x},${L.y}`;for(const d of T[_])d!==R&&h.every(x=>x!==d)&&h.push(d)}for(const L of h){const _={cells:[]},d={cells:[]};for(const m of R.cells)Dt(L.cells,m)?d.cells.push(m):_.cells.push(m);const x={cells:[]};for(const m of L.cells)Dt(d.cells,m)||x.cells.push(m);if(x.cells.length==0&&_.cells.length==0)continue;for(const m of[_,x,d])m.min=0,m.max=m.cells.length;let D=!0;for(;D;){D=!1;for(const[m,B]of[[R,_],[L,x]])m.max-B.min<d.max&&(d.max=m.max-B.min,D=!0),m.min-B.max>d.min&&(d.min=m.min-B.max,D=!0),m.max-d.min<B.max&&(B.max=m.max-d.min,D=!0),m.min-d.max>B.min&&(B.min=m.min-d.max,D=!0)}for(const m of[d,_,x].filter(B=>B.cells.length>0&&B.min==B.max))if(!(U.filter(B=>fe(B,m)).length>0)&&(U.push(m),m.cells.length<=8))for(const B of m.cells){const J=`${B.x},${B.y}`;J in T?T[J].push(m):T[J]=[m]}}}let N=U.filter(R=>R.cells.length==R.min),E=[];for(const R of N)for(const h of R.cells)E.push({op:"mark",x:h.x,y:h.y});N=U.filter(R=>R.max==0);for(const R of N)for(const h of R.cells)E.push({op:"dig",x:h.x,y:h.y});if(E.length>0)return E;if(!g)return[];const A=ae(U);return A.op="dig",[A]}async function a(i){setTimeout(()=>{r(i)&&a(i)},20)}const M=()=>a(!1),k=()=>r(!1),C=()=>a(!0),P=()=>r(!0);return s.$$set=i=>{"field"in i&&l(2,n=i.field)},[r,a,n,M,k,C,P]}class _e extends at{constructor(e){super(),ht(this,e,he,ue,ct,{field:2})}}function de(s){let e,l,n,c,o,u,t,r="github source code",f,y={};return e=new oe({props:y}),s[1](e),n=new _e({props:{field:s[0]}}),{c(){dt(e.$$.fragment),l=H(),dt(n.$$.fragment),c=H(),o=b("br"),u=H(),t=b("a"),t.textContent=r,this.h()},l(a){mt(e.$$.fragment,a),l=z(a),mt(n.$$.fragment,a),c=z(a),o=v(a,"BR",{}),u=z(a),t=v(a,"A",{href:!0,"data-svelte-h":!0}),W(t)!=="svelte-1iae31h"&&(t.textContent=r),this.h()},h(){I(t,"href","https://github.com/fishautumn/mine")},m(a,M){pt(e,a,M),O(a,l,M),pt(n,a,M),O(a,c,M),O(a,o,M),O(a,u,M),O(a,t,M),f=!0},p(a,[M]){const k={};e.$set(k);const C={};M&1&&(C.field=a[0]),n.$set(C)},i(a){f||(et(e.$$.fragment,a),et(n.$$.fragment,a),f=!0)},o(a){nt(e.$$.fragment,a),nt(n.$$.fragment,a),f=!1},d(a){a&&(p(l),p(c),p(o),p(u),p(t)),s[1](null),gt(e,a),gt(n,a)}}}function me(s,e,l){let n;function c(o){vt[o?"unshift":"push"](()=>{n=o,l(0,n)})}return[n,c]}class be extends at{constructor(e){super(),ht(this,e,me,de,ct,{})}}export{be as component};
